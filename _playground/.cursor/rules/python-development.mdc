---
description: Python development entry point - all Python work goes into snake-pit
alwaysApply: true
---

# Python Development - Snake Pit

## High-Level Overview

**All Python development, scripts, and projects MUST go into the `snake-pit` directory.**

```
/home/pi/_playground/snake-pit/
```

This is the **centralized location** for all Python-related work in this workspace.

## Quick Reference

- **Location**: `/home/pi/_playground/snake-pit/`
- **Main Environment**: `.venv/` (shared dependencies)
- **Projects**: `projects/` subdirectory
- **Package Manager**: `uv` (ultra-fast Python package installer)
- **Bootstrap**: `_playground/_scripts/bootstraps/bootstrap-snake-pit.sh`

## Detailed Rules

For comprehensive Python development rules, standards, and best practices, see:

**`/home/pi/_playground/snake-pit/.cursor/rules/`**

This directory contains:
- `python-standards.mdc` - PEP 8, type hints, docstrings
- `project-structure.mdc` - Monorepo layout and organization
- `hardware-raspberry-pi.mdc` - GPIO/I2C/SPI integration patterns

## Key Principles

1. **Centralization**: All Python code lives in `snake-pit/`
2. **Two-tier Environments**: Main `.venv/` for shared deps, project `.venv/` for isolated needs
3. **uv-based**: Use `uv` for ALL package management (standard tool, pip is deprecated)
4. **Tracked**: All Python code is tracked in git (part of `_playground/`)

## Package Management

**`uv` is the standard Python package manager** - All packages MUST be managed with `uv`, not `pip`.

- ‚úÖ **Use `uv pip install`** - Primary tool for all installations
- ‚úÖ **Use `uv venv`** - Create virtual environments
- ‚úÖ **Use `uv run`** - Run commands without activating venv
- ‚ùå **Avoid `pip` directly** - Only use as fallback if `uv` unavailable

**Why uv?**
- ‚ö° 10-100x faster than pip
- üîí More reliable dependency resolution
- üì¶ Better virtual environment handling
- ‚úÖ Standard across snake-pit and _dev packages

**Migration Status**: All existing pip-installed packages have been migrated to uv. See `_playground/_scripts/migrate-pip-to-uv.sh` for migration script.

## When Working with Python

- ‚úÖ Create new Python scripts/projects in `snake-pit/projects/`
- ‚úÖ Install shared dependencies to main `.venv/`
- ‚úÖ Use project-specific venvs for conflicting dependencies
- ‚úÖ Reference snake-pit rules directory for detailed guidelines
- ‚ùå Do NOT create Python projects outside `snake-pit/`
- ‚ùå Do NOT install Python packages globally (use venvs)

## Virtual Environment Requirements

**RULE: Always use a venv unless there's a specific technical reason not to.**

### When to Use a Venv

- ‚úÖ **ALL development packages** - Any Python code with dependencies
- ‚úÖ **ALL utility packages** - Even if in `_dev/packages/` (like `iMenu_py`)
- ‚úÖ **ALL scripts with dependencies** - Even minimal ones
- ‚úÖ **ALL projects** - Standard practice for isolation

### Rare Exceptions (System-Level Only)

**Only these scenarios may not use a venv:**

1. **System bootstrap scripts** - Scripts that install Python/venv itself
   - Example: `bootstrap-snake-pit.sh` that creates the venv
   - These run before venvs exist

2. **Package installers** - Scripts that install Python packages
   - Example: Scripts that run `uv pip install` to set up environments
   - These are part of the installation process

3. **Cross-version compatibility scripts** - Scripts that must work with multiple Python versions
   - Usually better handled with venvs per version

**For development packages like `iMenu_py`:**
- ‚ùå **NO EXCEPTIONS** - Always use a venv
- ‚úÖ Create `.venv/` in the package directory
- ‚úÖ Use `uv venv` to create it
- ‚úÖ Install dependencies with `uv pip install -r requirements.txt`

### Creating Venvs for Packages Outside snake-pit

For Python packages in `_dev/packages/` or other locations:

```bash
# Create venv in package directory
cd /path/to/package
uv venv

# Install dependencies
uv pip install -r requirements.txt

# Or activate and use normally
source .venv/bin/activate
pip install -r requirements.txt
```

**Key Principle**: If it has dependencies or is a development utility, it needs a venv. No exceptions.

## More Information

See `snake-pit/README.md` for setup instructions, project structure, and usage examples.
